// Generated by CoffeeScript 1.6.3
var dataWriter, exec, logging, util;

util = require('./util');

logging = require('./logging');

dataWriter = require('../data/dataWriter');

exec = require('child_process').exec;

module.exports = function(context, localCopy, docLogger, params) {
  var description, execCommand, name, writerType;
  name = context.name;
  execCommand = params.execCommand;
  writerType = params.writerType;
  description = params.description;
  util.timelog(name, description);
  execCommand += ' ' + '"' + localCopy + '"';
  return exec(execCommand, function(error, stdout, stderr) {
    var meta;
    dataWriter.write(context, writerType, execCommand + "'s stdout: \n" + stdout);
    dataWriter.write(context, writerType, execCommand + "'s stderr: \n" + stderr);
    if (error !== null) {
      return dataWriter.write(context, writerType, execCommand + "'sexec error: " + error);
    } else {
      util.timelog(name, description);
      return meta = {
        'raw': stdout,
        'stderr': stderr
      };
    }
  });
};
