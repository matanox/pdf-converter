// Generated by CoffeeScript 1.6.3
var connect, connection, docTables, init, purge, tables;

docTables = [
  {
    name: 'sentences'
  }, {
    name: 'headers'
  }
];

docTables.forEach(function(table) {
  return table.type = 'docTable';
});

tables = docTables;

connection = {
  host: 'localhost',
  user: 'articlio',
  password: 'articlio',
  database: 'articlio',
  charset: 'utf8'
};

exports.connect = connect = function() {
  var knex;
  return knex = require("knex")({
    dialect: "mysql",
    connection: process.env.DB_CONNECTION_STRING || connection
  });
};

exports.init = init = function() {
  var conn, table, _i, _len, _results;
  conn = connect();
  _results = [];
  for (_i = 0, _len = tables.length; _i < _len; _i++) {
    table = tables[_i];
    console.dir(table);
    _results.push(conn.schema.createTable(table.name, function(newTable) {
      newTable.increments('id');
      if (table.type === 'docTable') {
        console.log('inside');
        newTable.string('docName');
        return newTable.string('text');
      }
    })["catch"](function(error) {
      return console.error(error);
    }));
  }
  return _results;
};

exports.purge = purge = function() {
  var conn;
  conn = connect();
  return tables.forEach(function(table) {
    return conn.schema.dropTableIfExists(table.name);
  });
};

init();
