// Generated by CoffeeScript 1.4.0
var hookElementTextPos, hookId, outputTemplate;

require("fs");

outputTemplate = fs.readFileSync('outputTemplate/index.html').toString();

hookId = 'hookPoint';

hookElementTextPos = outputTemplate.indexOf(">", outputTemplate.indexOf('<span id="' + hookId + '"')) + 1;

exports.serveOutput = function(text, name, res) {
  var dummyText, outputFile, outputHtml;
  dummyText = "aaaa";
  outputFile = './local-copies/' + 'output/' + name + '.html';
  outputHtml = outputTemplate.slice(0, hookElementTextPos).concat(dummyText, outputTemplate.slice(hookElementTextPos));
  console.log(outputHtml);
  return fs.writeFile(outputFile, outputHtml, function(err) {
    if (err != null) {
      res.send(500);
      throw err;
    }
    console.log('Output saved');
    console.log('Sending response....');
    return res.sendfile(outputFile);
  });
};
