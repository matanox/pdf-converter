// Generated by CoffeeScript 1.6.3
var css, logging, util;

util = require('../util');

logging = require('../logging');

css = require('../css');

exports.go = function(req, res) {
  var paragraphOpeningDelimitation, tokenSequence, x, _i, _len, _ref;
  if (!req.session.tokens) {
    return;
  }
  tokenSequence = [];
  paragraphOpeningDelimitation = {
    metaType: 'paragraphBreak'
  };
  _ref = req.session.tokens;
  for (_i = 0, _len = _ref.length; _i < _len; _i++) {
    x = _ref[_i];
    if (x.metaType === 'regular') {
      if (x.paragraph === 'opener') {
        tokenSequence.push(paragraphOpeningDelimitation);
      }
    }
    tokenSequence.push(x);
  }
  return res.json(tokenSequence);
};
